{% extends "base.html" %} {% block content %} {% load static %}
<div class="d-flex flex-column align-items-center">
  {% comment %} style="display:flex;flex-direction: column;align-items: center;" {% endcomment %}
  <h1>{{ title }}</h1>
  {% comment %} <div style="position: relative; width: 100%; padding-bottom: 56.25%"> {% endcomment %}
  <div style="position: relative; width: 53%; padding-bottom: 36%">
    <iframe
      id="inlineFrameExample"
      title="Inline Frame Example"
      style="position: absolute; width: 100%; height: 100%"
      src="{{ gamepath }}/index.html"
    >
    </iframe>
  </div>

</div>


<div>
  <span>평점 : {{ star_score }}</span>
  <span>제작자 : {{ maker_name }}</span>
  <span>업로드 일시 : {{ created_at }}</span>
  <br />
  <span
    >태그 : {% for item in tag %}
    <span>{{ item.name }}</span>
    {% endfor %}
  </span>
</div>

<div class="d-flex align-items-center justify-content-around">
    <iframe
    width="560"
    height="315"
    src="https://www.youtube.com/embed/_2MtnLyBdbk"
    title="YouTube video player"
    frameborder="0"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
    referrerpolicy="strict-origin-when-cross-origin"
    allowfullscreen
  ></iframe>
  {% for image in screenshot %}
    <img src={{ image.src }} alt="" style="width: 300px">
  {% endfor %}
</div>


{% comment %} https://youtu.be/_2MtnLyBdbk
 {% endcomment %}


<div>
  content : {{ content }}
</div>

{% comment %} action={% url 'games:CommentAPIView' game_pk %} {% endcomment %}
<form action='' method="POST" class="d=flex ">
  {% csrf_token %}
  {% comment %} {{ request.user }} {% endcomment %}
  <label for="comment">댓글</label>
  <input type="text" name="comment" id="comment">
  <button type="submit">게시</button>
</form>

<div>
  {% for comment in comments %}
  {% if comment.src %}
  <img src={{ comment.src }} alt="" />
  {% else %} <img src={% static 'image/user.png' %} alt="" style='width: 30px;'>
  {% endif %}

  <span>작성자 : {{ comment.author }}</span>
  <span>댓글 내용 : {{ comment.content }}</span>
  <span>작성 일시 : {{ comment.created_at }}</span>
  <br />
  {% endfor %}
</div>
<script>
  async function aSend({url, method, is_token, body = null}) {
    const headers = {};

    if (is_token) {
        await tokenRefresh();
        const access = localStorage.getItem('access_token');
        headers['Authorization'] = `Bearer ${access}`
    }

    const data = {
        method: method,
        headers: headers,
    }

    if (body) {
        data["body"] = body
    }

    const response = await fetch(`${url}`, data);

    return response.json();
}
</script>
{% endblock content %}
